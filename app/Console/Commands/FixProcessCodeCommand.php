<?php

namespace App\Console\Commands;

use App\Models\Process;
use Illuminate\Console\Command;

class FixProcessCodeCommand extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'command:fix-process-code';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Fix process code in processes table';

    /**
     * Execute the console command.
     *
     * @return int
     */
    public function handle()
    {
        $data  = "#102
        #103
        #104
        #105
        #106
        #112
        #120
        #121
        #123
        #125
        #127
        #130
        #132
        #133
        #134
        #135
        #137
        #141
        #142
        #143
        #147
        #148
        #151
        #152
        #153
        #154
        #155
        #156
        #157
        #158
        #159
        #160
        #161
        #162
        #163
        #164
        #165
        #166
        #201
        #202
        #203
        #204
        #205
        #206
        #207
        #208
        #209
        #210
        #211
        #213
        #214
        #215
        #216
        #217
        #219
        #220
        #221
        #222
        #225
        #228
        #229
        #230
        #231
        #232
        #233
        #234
        #235
        #236
        #237
        #238
        #239
        #240
        #243
        #244
        #245
        #248
        #256
        #257
        #258
        #259
        #260
        #261
        #262
        #263
        #265
        #266
        #267
        #268
        #269
        #270
        #273
        #275
        #280
        #281
        #321
        #322
        #323
        #325
        #331
        #338
        #340
        #344
        #345
        #346
        #350
        #359
        #360
        #363
        #364
        #365
        #368
        #369
        #370
        #371
        #372
        #373
        #375
        #376
        #377
        #378
        #379
        #380
        #381
        #382
        #383
        #384
        #385
        #386
        #387
        #388
        #400
        #401
        #402
        #407
        #408
        #409
        #412
        #421
        #422
        #423
        #424
        #426
        #436
        #437
        #443
        #444
        #445
        #446
        #447
        #448
        #451
        #455
        #456
        #457
        #458
        #459
        #460
        #461
        #462
        #463
        #464
        #465
        #466
        #467
        #468
        #469
        #480
        #481
        #482
        #483
        #511
        #512
        #513
        #601
        #602
        #603
        #604
        #605
        #606
        #607
        #608
        #609
        #610
        #611
        #612
        #613
        #614
        #615
        #616
        #617
        #618
        #619
        #620
        #621
        #622
        #623
        #624
        #625
        #626
        #627
        #628
        #629
        #630
        #631
        #632
        #633
        #634
        #635
        #636
        #638
        #639
        #640
        #641
        #642
        #643
        #644
        #645
        #646
        #647
        #648
        #649
        #650
        #701
        #801
        #802
        #803
        #804
        #806
        #808
        #813
        #998
        #999
        A001
        A002
        A003
        A004
        A005
        A006
        A007
        A008
        A009
        A010
        A011
        A012
        A013
        A014
        A015
        A016
        A017
        A018
        A019
        A020
        A021
        A022
        A023
        A024
        A025
        A026
        A027
        A028
        A029
        A030
        A031
        A032
        A033
        A034
        A035
        A036
        B101
        B102
        B103
        B104
        B105
        B106
        B107
        B108
        B109
        B110
        B111
        B112
        B113
        B114
        B115
        B116
        B117
        B118
        B119
        B120
        B121
        B122
        B123
        B124
        B125
        C201
        C202
        C203
        C204
        C205
        C206
        C207
        C208
        C209
        C210
        C211
        C212
        C213
        C214
        C215
        C216
        C217
        C218
        C219
        C220
        C221
        C222
        C223
        C224
        C225
        C226
        C227
        C228
        C229
        C230
        C231
        C232
        C233
        C234
        C235
        C236
        C237
        C238
        C239
        C240
        C241
        C242
        C243
        C244
        C245
        C246
        C247
        C248
        C249
        C250
        C251
        C252
        C253
        C254
        C255
        C256
        C257
        C258
        C259
        C260
        C261
        C262
        C263
        C264
        C265
        C266
        C267
        C268
        C269
        C270
        C271
        C272
        C273
        C274
        C275
        C276
        C277
        C278
        C279
        C280
        C281
        C282
        C283
        C284
        C285
        C286
        C287
        C288
        C289
        C290
        C291
        C292
        C293
        C294
        C295
        C296
        C297
        C298
        C299
        C300
        C301
        C302
        C303
        C304
        C305
        C306
        C307
        C308
        C309
        C310
        C311
        C312
        C313
        C314
        C315
        C316
        C317
        C318
        C319
        C320
        C321
        C322
        C323
        C324
        C325
        C326
        C327
        C328
        C329
        C330
        C331
        C332
        C333
        C334
        C335
        C336
        C337
        C338
        C339
        C340
        C341
        C342
        C343
        C344
        D301
        D302
        D303
        D304
        D305
        D306
        D307
        D308
        D309
        D350
        D351
        D352
        D353
        D354
        D355
        D356
        D357
        E401
        E402
        E403
        E404
        E405
        E406
        E407
        E408
        E409
        E410
        E411
        E412
        E413
        E414
        E415
        E416
        E417
        E418
        E419
        E420
        E421
        E422
        E423
        E424
        E425
        E426
        E427
        E428
        E801
        F601
        F602
        F603
        F604
        F605
        G651
        G652
        G653
        G654
        G655
        H701
        H702
        H703
        H704
        H705
        H706
        I751
        I752
        J801
        Z111
        ";

        $explodedData = explode(PHP_EOL, $data);

        
        $processes = Process::orderBy("id")->get();

        $this->withProgressBar($processes, function (Process $process) use ($explodedData) { 
            if(isset($explodedData[$process->id - 1])) {
                $process->process_code = trim($explodedData[$process->id - 1]);
                $process->save();
            }
        });

        $this->info('The command was successful!');

        return Command::SUCCESS;
    }
}
